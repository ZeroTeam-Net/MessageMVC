﻿# 多传输对象,多服务的应用场景实际项目中,可能不止一个网络传输对象,且有多个服务,此时应该怎么简单的工作呢# MessageProducer类- 发现并注册生产者与服务名称的对应关系- 提供静态方法生产消息,简化操作### 发现并注册生产者与服务名称的对应关系1. 正确依赖注入所有生产者(IMessageProducer)```csharpIocHelper.AddTransient<IMessageProducer, ZmqProducer>();//ZMQ进程内通讯生产端IocHelper.AddTransient<IMessageProducer, KafkaProducer>();//采用Kafka生产端```2. 正确配置appsettings.json- 配置节:根节点下的MessageProducer- 配置内容:实现IMessageProducer的实现类名称为键,服务名称为内容,通过逗号区分```json{  "MessageProducer": {    "KafkaProducer": "test1,test2",    "ZmqProducer": "Inproc"  }}```3. 依赖注册为IFlowMiddleware```csharpIocHelper.AddTransient<IFlowMiddleware, MessageProducer>();//消息选择器```