<!--此标记表明此文件可被设计器更新,如果不允许此操作,请删除此行代码.design by:agebull designer date:2020/4/17 16:40:21-->
<!DOCTYPE html>
<html>
<head>
    <meta name='renderer' content='webkit'/>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=21'/>
    <title>
        消息链路跟踪 > None > 健康检查
    </title>
    <meta charset='utf-8'/>
    <meta name='viewport' content='width=device-width'/>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8-bom'/>
    <!--font-awesome-->
    <link rel='stylesheet' type='text/css' href='http://cdn.staticfile.org/font-awesome/5.8.2/css/all.min.css'>
    <!--JQuery-->
    <script type='text/javascript' src='http://cdn.staticfile.org/jquery/3.4.1/jquery.min.js'></script>
    <!--VUE-->
    <link rel='stylesheet' type='text/css' href='http://cdn.staticfile.org/element-ui/2.8.2/theme-chalk/index.css'>
    <script type='text/javascript' src='http://cdn.staticfile.org/vue/2.6.10/vue.js'></script>
    <script type='text/javascript' src='http://cdn.staticfile.org/element-ui/2.8.2/index.js'></script>
    <script type='text/javascript' src='http://cdn.staticfile.org/element-ui/2.8.2/locale/zh-CN.min.js'></script>
    <!--Extend-->
    <script type='text/javascript' src='../../js/extend/vue_ex.js'></script>
    <script type='text/javascript' src='../../js/extend/core.js'></script>
    <script type='text/javascript' src='../../js/extend/ajax.js'></script>
    <script type='text/javascript' src='../../js/extend/ajax_vue.js'></script>
    <script type='text/javascript' src='../../js/extend/extend.js'></script>
    <script type='text/javascript' src='../../js/extend/type.js'></script>
    <link rel='stylesheet' type='text/css' href='../../styles/vuePage.css' />

    <style>
        .el-dialog {
            width: 480px;
        }
        .el-dialog__body {
            width: 440px;
        }
        .el-dialog__body_form {
            width: 410px;
        }
    </style>
</head>
<body>
<div id='work_space' class='tiled' v-cloak>
    <el-container style='height: 100%; width: 100%'>
        <el-header style='height:54px'>
            <div style='display: inline-block;'>
                <el-button-group>
                    <el-tooltip placement='top' effect='light'>
                        <div slot='content'>重新载入数据</div>
                        <el-button icon='el-icon-refresh' @click='loadList'></el-button>
                    </el-tooltip>
                    <el-tooltip placement='top' effect='light'>
                        <div slot='content'>导出Excel</div>
                        <el-button icon='fa fa-file-excel-o' @click='exportExcel'></el-button>
                    </el-tooltip>
                    <el-tooltip placement='top' effect='light'>
                        <div slot='content'>新增一条数据</div>
                        <el-button icon='fa fa-plus' @click='doAddNew'></el-button>
                    </el-tooltip>
                    <el-tooltip placement='top' effect='light'>
                        <div slot='content'>编辑当前选行的数据</div>
                        <el-button icon='el-icon-edit' @click='doEdit'></el-button>
                    </el-tooltip>
                    <el-tooltip placement='top' effect='light'>
                        <div slot='content'>删除当前选中的一或多行数据的数据</div>
                        <el-button icon='fa fa-times' @click='doDelete'></el-button>
                    </el-tooltip>
                </el-button-group>
            </div>
            <div style='display: inline-block; float: right'>
                <el-input placeholder='请输入搜索内容' v-model='list.keyWords' class='input-with-select' clearable>
                    <el-select v-model='list.field' slot='prepend' placeholder='选择字段' style='width: 160px;'>
                        <el-option value='_any_' label='模糊查询'></el-option>
                        <el-option value='CheckID' label='检查标识'></el-option>
                        <el-option value='Service' label='服务名称'></el-option>
                        <el-option value='Url' label='服务地址'></el-option>
                        <el-option value='Machine' label='机器名称'></el-option>
                        <el-option value='Start' label='开始时间'></el-option>
                        <el-option value='End' label='结束时间'></el-option>
                        <el-option value='Level' label='健康等级'></el-option>
                        <el-option value='Details' label='检查详情'></el-option>
                    </el-select>
                    <el-button slot='append' icon='el-icon-search' @click='doQuery'></el-button>
                </el-input>
            </div>
        </el-header>
        <el-main style='margin: 0; padding: 0'>
            <template>
                <!-- Grid -->
                <el-table :data='list.rows'
                          border
                          ref='dataTable'
                          highlight-current-row
                          @sort-change='onSort'
                          @row-dblclick='dblclick'
                          @current-change='currentRowChange'
                          @selection-change='selectionRowChange'
                          style='width: 100%'>
                    <el-table-column type='selection'
                                     align='center'
                                     header-align='center'>
                    </el-table-column>
                    <el-table-column prop='CheckID'
                                     header-align='center' align='left'
                                     label='检查标识' sortable='true' width=120>
                    </el-table-column>
                    <el-table-column prop='Service'
                                     header-align='center' align='left'
                                     label='服务名称' sortable='true' width=160>
                    </el-table-column>
                    <el-table-column prop='Url'
                                     header-align='center' align='left'
                                     label='服务地址'>
                    </el-table-column>
                    <el-table-column prop='Machine'
                                     header-align='center' align='left'
                                     label='机器名称' sortable='true'>
                    </el-table-column>
                    <el-table-column prop='Start'
                                     header-align='center' align='left'
                                     label='开始时间' sortable='true' width=160>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.Start | formatTime}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='End'
                                     header-align='center' align='left'
                                     label='结束时间' sortable='true' width=160>
                        <template slot-scope='scope'>
                            <span style='margin-left: 3px'>
                                {{scope.row.End | formatTime}}
                            </span>
                        </template>
                    </el-table-column>
                    <el-table-column prop='Level'
                                     header-align='center' align='left'
                                     label='健康等级' sortable='true' width=120>
                    </el-table-column>
                    <el-table-column type='expand'>
                        <template slot-scope='props'>
                            <el-form label-position='left' inline>
                                <el-form-item label='主键' prop='Id'>
                                    <span>{{props.row.Id}}</span>
                                </el-form-item>
                                <el-form-item label='检查详情' prop='Details' size='large'>
                                    <span>{{props.row.Details}}</span>
                                </el-form-item>
                            </el-form>
                        </template>
                    </el-table-column>
                </el-table>
            </template>
        </el-main>
        <el-footer style='border-top:1px solid #ebebeb;'>
            <el-pagination @size-change='sizeChange'
                           @current-change='pageChange'
                           background
                           layout='total, sizes, prev, pager, next, jumper'
                           :current-page='list.page'
                           :page-sizes='list.pageSizes'
                           :page-size='list.pageSize'
                           :total='list.total'>
            </el-pagination>
        </el-footer>
    </el-container>
    <!-- Form -->
    
     <el-dialog title='健康检查编辑'
                :visible.sync='form.visible'
                v-loading='form.loading'
                element-loading-text='正在处理'
                element-loading-spinner='el-icon-loading'
                element-loading-background='rgba(0, 0, 0, 0.8)'>
            <div class='el-dialog__body_form'>
            <el-form :model='form.data'
                     :rules='form.rules'
                     label-position='left'
                     label-width='100px'
                     ref='dataForm' 
                     @submit.native.prevent>
            <el-form-item label='主键' prop='Id'>
                <el-input v-model='form.data.Id' placeholder='主键' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='检查标识' prop='CheckID'>
                <el-input v-model='form.data.CheckID' placeholder='年月日时分组合成的数字' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='服务名称' prop='Service'>
                <el-input v-model='form.data.Service' placeholder='服务名称' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='服务地址' prop='Url'>
                <el-input v-model='form.data.Url' placeholder='服务地址' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='机器名称' prop='Machine'>
                <el-input v-model='form.data.Machine' placeholder='机器名称' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='开始时间' prop='Start'>
                <el-date-picker v-model='form.data.Start' placeholder='开始时间' clearable :readonly='form.readonly'value-format='yyyy-MM-ddTHH:mm:ss' type='datetime' style='width:100%'></el-date-picker>
            </el-form-item>
            <el-form-item label='结束时间' prop='End'>
                <el-date-picker v-model='form.data.End' placeholder='结束时间' clearable :readonly='form.readonly'value-format='yyyy-MM-ddTHH:mm:ss' type='datetime' style='width:100%'></el-date-picker>
            </el-form-item>
            <el-form-item label='健康等级' prop='Level'>
                <el-input v-model='form.data.Level' placeholder='0 未检查 -1异常 1-5为等级越高越好' auto-complete='off' clearable :readonly='form.readonly'></el-input>
            </el-form-item>
            <el-form-item label='检查详情' prop='Details' size='large'>
                <el-input v-model='form.data.Details' placeholder='检查详情' auto-complete='off' clearable :readonly='form.readonly' type='textarea' :rows='3'></el-input>
            </el-form-item>
            </el-form>
        </div>
        <div slot='footer' v-if='!form.readonly'>
            <el-button icon='el-icon-close' @click='form.visible = false'>取消</el-button>
            <el-button icon='el-icon-check' @click='save' type='primary'>保存</el-button>
        </div>
    </el-dialog>
</div>
<script type='text/javascript' src='script.js'></script>
</body>
</html>